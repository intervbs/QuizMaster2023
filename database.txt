CREATE TABLE accounts (
    user_id INT PRIMARY KEY AUTO_INCREMENT,
    first_name VARCHAR(63) NOT NULL,
    last_name VARCHAR(63) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    username VARCHAR(63) NOT NULL UNIQUE,
    admin BOOLEAN NOT NULL DEFAULT FALSE
);

CREATE TABLE quizzes (
    quiz_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    description TEXT NOT NULL DEFAULT 'No Description Added'
    category VARCHAR(50) NOT NULL,
    is_public BOOLEAN NOT NULL DEFAULT FALSE
);

CREATE TABLE questions (
    question_id int(11) NOT NULL,
    quiz_id int(11) NOT NULL,
    question_text varchar(255) NOT NULL,
    choice1_text varchar(255) DEFAULT NULL,
    choice2_text varchar(255) DEFAULT NULL,
    choice3_text varchar(255) DEFAULT NULL,
    choice4_text varchar(255) DEFAULT NULL,
    choice_essay text DEFAULT NULL,
    choice1_correct tinyint(1) NOT NULL DEFAULT 0,
    choice2_correct tinyint(1) NOT NULL DEFAULT 0,
    choice3_correct tinyint(1) NOT NULL DEFAULT 0,
    choice4_correct tinyint(1) NOT NULL DEFAULT 0,
    question_approved tinyint(1) NOT NULL DEFAULT 0,
    q_type tinyint(1) NOT NULL DEFAULT 0 COMMENT '0 = MC, 1 = Essay, 2 = Single'
    FOREIGN KEY (quiz_id) REFERENCES quizzes(quiz_id) ON DELETE CASCADE
);

CREATE TABLE answers (
    answer_id int(11) NOT NULL,
    user_id int(11) NOT NULL,
    quiz_id int(11) NOT NULL,
    question_id int(11) NOT NULL,
    choice1_selected tinyint(1) NOT NULL DEFAULT 0,
    choice2_selected tinyint(1) NOT NULL DEFAULT 0,
    choice3_selected tinyint(1) NOT NULL DEFAULT 0,
    choice4_selected tinyint(1) NOT NULL DEFAULT 0,
    essay_answer text DEFAULT NULL,
    comment text DEFAULT NULL,
    graded tinyint(1) NOT NULL DEFAULT 0
    FOREIGN KEY (user_id) REFERENCES accounts(user_id) ON DELETE CASCADE,
    FOREIGN KEY (quiz_id) REFERENCES quizzes(quiz_id) ON DELETE CASCADE,
    FOREIGN KEY (question_id) REFERENCES questions(question_id) ON DELETE CASCADE
);

CREATE TABLE quiz_graded (
    graded_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT NOT NULL,
    quiz_id INT NOT NULL,
    comment TEXT DEFAULT NULL,
    graded BOOLEAN NOT NULL DEFAULT FALSE,
    FOREIGN KEY (user_id) REFERENCES accounts(user_id) ON DELETE CASCADE,
    FOREIGN KEY (quiz_id) REFERENCES quizzes(quiz_id) ON DELETE CASCADE
);